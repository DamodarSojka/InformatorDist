<div layout="row" layout-sm="column" layout-wrap class="IK-paddings"> <div flex="50" layout-wrap> <div style="margin-top:10px"> <h5 ng-if="user.profile && !user.profile.authorized"> Wydarzenie zostanie opublikowane na stronie głównej po autoryzowaniu przez administrację. </h5> <h5 ng-if="!user.profile"> Wydarzenie dodane przez niezarejestrowanego użytkownika nie będzie mogło zostać poddane późniejszej edycji. <p>Załóż konto i zaloguj się aby uzyskać większą kontrolę nad publikowanymi wydarzeniami. </p></h5> </div> <form name="postForm" ng-submit="postForm.$valid && submitOrEditPost()"> <!-- maybe i can override or include required into categoriesBox and datepicker input to get that 'please fill this' native helper --> <a ng-click="getId()" ng-if="user.profile.staff" class="waves-effect waves-light btn indigo">Add from facebook</a> <md-input-container> <label>{{ 'TITLE' | translate }}</label> <input name="title" ng-model="post.title" required> <div ng-messages="postForm.title.$error"> <div ng-message="required" ng-if="postForm.title.$touched">{{'TITLEISREQUIRED' | translate }}</div> </div> </md-input-container> <md-input-container> <label>{{ 'TEXT' | translate }}</label> <textarea ng-model="post.text" name="text" required></textarea> <div ng-messages="postForm.text.$error"> <div ng-message="required" ng-if="postForm.text.$touched">{{'TEXTISREQUIRED' | translate}}</div> </div> </md-input-container> <!-- Time --> <md-input-container id="date_input_container"> <label>{{ 'From' | translate }}</label> <input name="from" class="date_input_container ng-style: postForm.$submitted && date_DatePicker === '' && {'border-color':'rgb(244,67,54)'}" ng-model="date_DatePicker" date-from-validator="{{post.dateTo}}"> <div ng-messages="postForm.from.$error" ng-if="postForm.$submitted || postForm.from.$touched"> <div ng-message="dateRequired">{{'DATEISREQUIRED' | translate}}</div> <div ng-message="dateIsAfterDateTo">{{'DateFromIsAfterDateTo' | translate}}</div> </div> </md-input-container> <md-input-container> <label>{{'StartTime' | translate}}</label> <input name="startTime" ng-model="post.startTime" required time-validator> <div ng-messages="postForm.startTime.$error"> <div ng-message="required" ng-if="postForm.startTime.$touched">{{'StartTimeIsRequired' | translate}}</div> <div ng-message="timeFormatting" ng-if="postForm.startTime.$touched">{{'TimeFormattingWrong' | translate}}</div> </div> </md-input-container> <md-input-container id="dateTo_input_container"> <label>{{ 'ToDate' | translate }}</label> <input name="dateTo" class="dateTo_input_container" ng-model="dateTo_DatePicker" date-to-validator="{{post.date}}"> <div ng-messages="postForm.dateTo.$error" ng-if="postForm.$submitted || postForm.dateTo.$touched"> <div ng-message="dateToIsBeforeDate">{{'DateToIsBeforeDate' | translate}}</div> </div> </md-input-container> <md-input-container> <label>{{'EndTime' | translate}}</label> <input name="endTime" ng-model="post.endTime" time-validator> <div ng-messages="postForm.endTime.$error"> <div ng-message="timeFormatting" ng-if="postForm.endTime.$touched">{{'TimeFormattingWrong' | translate}}</div> </div> </md-input-container> <!-- to make tooltip appear in firefox 
        setVisible(true) only if pointer-events is 'none' comment that from main js of material angular
      --> <div layout="row" layout-align="start end"> <!-- hack md-no-float and placeholder removed google places custom placeholder --> <md-input-container md-no-float flex> <label>{{ 'LOCATION' | translate }}</label> <input google-places placeholder="" ng-model="post.location"> </md-input-container> <md-icon aria-label="add" class="IK-pointer material-icons" ng-click="saveAsQuickInput('location')"> add <md-tooltip> {{ 'SaveAsQuickInput' | translate }} </md-tooltip> </md-icon> <md-icon aria-label="help" class="IK-pointer material-icons"> help </md-icon> <md-tooltip> {{ 'LocationTooltip' | translate }} </md-tooltip> </div> <div style="overflow:hidden"> <!-- if select will work maybe change that in future --> <button type="button" class="md-raised md-button md-default-theme md-primary" ng-repeat="(key, value) in user.profile.quickInput.location" ng-click="useQuickInput('location', key)">{{key}}</button> </div> <div layout="row" layout-align="start end"> <md-input-container flex> <label>{{ 'PHOTO' | translate }}</label> <input ng-model="post.photo1"> </md-input-container> <md-icon aria-label="help" class="IK-pointer material-icons"> help </md-icon> <md-tooltip> {{ 'PhotoTooltip' | translate }} </md-tooltip> </div> <div layout="row" layout-align="start end"> <md-input-container flex> <label>{{ 'WEBSITE' | translate }}</label> <input ng-model="post.url"> </md-input-container> <md-icon aria-label="help" class="IK-pointer material-icons"> help </md-icon> <md-tooltip> {{ 'WebsiteTooltip' | translate }} </md-tooltip> </div> <md-input-container> <label>{{ 'Price' | translate }}</label> <input ng-model="post.price"> </md-input-container> <div class="md-padding"> <div layout="row"> <div flex="50" flex-md="100" layout="column"> <fieldset class="standard ng-style: postForm.$submitted && atLeastOneCategory === 0 && {'border-color':'rgb(244,67,54)'}" flex> <legend><label>Categories <md-icon aria-label="help" class="IK-pointer material-icons"> help </md-icon> <md-tooltip md-direction="right"> {{ 'CategoriesTooltip' | translate }} </md-tooltip> </label></legend> <div layout="row" layout-wrap> <div flex="50" ng-repeat="category in categories"> <md-checkbox md-no-ink class="md-primary" ng-checked="isCategoryApplied(category)" ng-click="toggleCategoryClick(category)"> {{category | translate}} </md-checkbox> </div> </div> </fieldset> </div> </div> <!-- custom validator here  
          hidden input for correct and consistent styling with other inputs
          error rised when form is submitted and none category is chosen
        --> <md-input-container> <input name="categoriesBox" categories-validator ng-model="atLeastOneCategory" style="display:none" aria-label="labelAddedJustToPreventWarningInConsole"> <div ng-messages="postForm.categoriesBox.$error"> <div ng-message="atLeastOneCategory" ng-if="postForm.$submitted">{{ 'ATLEASTONECATEGORY' | translate }}</div> </div> </md-input-container> </div> <button type="submit" class="waves-effect waves-light btn indigo">{{ 'SUBMIT' | translate }}</button> <md-input-container> <div ng-messages="postForm.$error"> <div ng-message="atLeastOneCategory" ng-if="postForm.$submitted">{{ 'ATLEASTONECATEGORY' | translate }}</div> <div ng-message="dateRequired" ng-if="postForm.$submitted">{{'DATEISREQUIRED' | translate}}</div> <div ng-message="dateToIsBeforeDate">{{'DateToIsBeforeDate' | translate}}</div> <div ng-message="dateIsAfterDateTo">{{'DateFromIsAfterDateTo' | translate}}</div> </div> </md-input-container> </form> </div> <div flex="50" layout="column"> <div> <div ng-include="'views/post_full_edit_template.html'"></div> </div> <div layout="row"> <div offset="25"></div> <div flex="50" ng-include="'views/post_card_edit_template.html'"></div> </div> </div> </div>